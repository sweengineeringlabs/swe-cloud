#!/usr/bin/env bash
# cloud â€” swe-cloud quickstart entrypoint
set -euo pipefail

REPO_ROOT="$(cd "$(dirname "$0")" && pwd)"

usage() {
  echo "Usage: ./cloud <command> [options]"
  echo ""
  echo "Commands:"
  echo "  setup              One-time environment setup"
  echo "  build              Build the workspace"
  echo "    --debug            Build in debug mode (default: release)"
  echo "  test [suite]       Run tests"
  echo "    cloudemu|cloudkit|crates|scripts|all (default: all)"
  echo "  validate-routes    Validate UI route-to-page mappings"
  echo "  verify-cloudemu    Verify CloudEmu deployment"
}

CMD="${1:-}"
[ -n "$CMD" ] && shift

case "$CMD" in
  setup)            exec "$REPO_ROOT/bin/setup.sh"            "$@" ;;
  build)            exec "$REPO_ROOT/bin/build.sh"            "$@" ;;
  test)             exec "$REPO_ROOT/bin/test.sh"             "$@" ;;
  validate-routes)  exec "$REPO_ROOT/bin/validate-routes.sh"  "$@" ;;
  verify-cloudemu)  exec "$REPO_ROOT/bin/verify-cloudemu.sh"  "$@" ;;
  -h|--help|help|"") usage ;;
  *)
    usage
    exit 1
    ;;
esac
